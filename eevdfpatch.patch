--- 0001-EEVDF.patch.orig	2023-08-31 21:31:07.056800913 +0900
+++ 0001-EEVDF.patch	2023-08-31 21:30:07.293197338 +0900
@@ -411,11 +411,13 @@
 index 83e36547af176..84b0d47ed9b85 100644
 --- a/kernel/sched/core.c
 +++ b/kernel/sched/core.c
-@@ -4501,6 +4501,7 @@ static void __sched_fork(unsigned long clone_flags, struct task_struct *p)
+@@ -4501,8 +4501,9 @@ static void __sched_fork(unsigned long clone_flags, struct task_struct *p)
  	p->se.prev_sum_exec_runtime	= 0;
  	p->se.nr_migrations		= 0;
  	p->se.vruntime			= 0;
 +	p->se.vlag			= 0;
+	p->se.dur_avg			= 0;
+	p->se.prev_sleep_sum_runtime	= 0;
  	INIT_LIST_HEAD(&p->se.group_node);
  
  #ifdef CONFIG_FAIR_GROUP_SCHED
@@ -784,11 +786,13 @@
 index 84b0d47ed9b85..e85a2fd258e2b 100644
 --- a/kernel/sched/core.c
 +++ b/kernel/sched/core.c
-@@ -4502,6 +4502,7 @@ static void __sched_fork(unsigned long clone_flags, struct task_struct *p)
+@@ -4502,8 +4502,9 @@ static void __sched_fork(unsigned long clone_flags, struct task_struct *p)
  	p->se.nr_migrations		= 0;
  	p->se.vruntime			= 0;
  	p->se.vlag			= 0;
 +	p->se.slice			= sysctl_sched_min_granularity;
+	p->se.dur_avg			= 0;
+	p->se.prev_sleep_sum_runtime	= 0;
  	INIT_LIST_HEAD(&p->se.group_node);
  
  #ifdef CONFIG_FAIR_GROUP_SCHED
@@ -1889,8 +1893,8 @@
 - *
 - * (default: 1 msec * (1 + ilog(ncpus)), units: nanoseconds)
 - */
--unsigned int sysctl_sched_wakeup_granularity			= 1000000UL;
--static unsigned int normalized_sysctl_sched_wakeup_granularity	= 1000000UL;
+-unsigned int sysctl_sched_wakeup_granularity			= 3000000UL;
+-static unsigned int normalized_sysctl_sched_wakeup_granularity	= 3000000UL;
 -
  const_debug unsigned int sysctl_sched_migration_cost	= 500000UL;
  
@@ -2584,12 +2588,14 @@
 index e85a2fd258e2b..a5d3422f7d0de 100644
 --- a/kernel/sched/core.c
 +++ b/kernel/sched/core.c
-@@ -4502,7 +4502,7 @@ static void __sched_fork(unsigned long clone_flags, struct task_struct *p)
+@@ -4502,9 +4502,9 @@ static void __sched_fork(unsigned long clone_flags, struct task_struct *p)
  	p->se.nr_migrations		= 0;
  	p->se.vruntime			= 0;
  	p->se.vlag			= 0;
 -	p->se.slice			= sysctl_sched_min_granularity;
 +	p->se.slice			= sysctl_sched_base_slice;
+	p->se.dur_avg			= 0;
+	p->se.prev_sleep_sum_runtime	= 0;
  	INIT_LIST_HEAD(&p->se.group_node);
  
  #ifdef CONFIG_FAIR_GROUP_SCHED
